{% extends "base.html" %}

{% block title %}Digital Faxing AI Solution{% endblock %}

{% block head %}
<style>
  .intro-text {
    text-align: center;
    color: #53575A;
    margin-bottom: 40px;
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin: 40px 0;
  }

  .card-grid {
    background: #fff;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    border: 1px solid #53575A;
  }

  .card-grid h3 {
    color: #003057;
    margin-bottom: 15px;
  }

  .card-grid p {
    margin-bottom: 20px;
    color: #53575A;
  }

  .welcome-message {
    text-align: center;
    margin-bottom: 30px;
    background-color: #f0f4f8;
    padding: 20px;
    border-radius: 8px;
    color: #003057;
    border: 1px solid #4A7729;
  }
</style>
{% endblock %}

{% block content %}
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ 'danger' if category == 'danger' else 'info' }} alert-dismissible fade show" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  {% if 'user_id' in session %}
    <div class="welcome-message">
      <h2>Welcome, {{ session['user_id'] }}!</h2>
      <p class="mb-0">You are logged in as a {{ session.get('status', 'User') }}.</p>
    </div>
  {% endif %}

  <h1 class="text-center mb-4">Digital Faxing AI Solution</h1>
  <p class="intro-text">Streamline prescription fax processing with AI-powered data extraction and digital workflow management.</p>

  <div class="grid">
    <div class="card-grid">
      <h2>View Received Faxes</h2>
      <p>Incoming faxes are processed using Gemini 2.5-flash and Google Cloud Vision.</p>
      <a href="{{ url_for('list_forms') }}" class="button">View Faxes</a>
    </div>
    <div class="card-grid">
      <h2>Send Faxes</h2>
      <p>Simulating sending faxes to healthcare providers / Humana Employees.</p>
      <a href="{{ url_for('send_fax') }}" class="button">Send Fax</a>
    </div>
    <div class="card-grid">
      <h2>Upload & Test</h2>
      <p>Upload sample fax documents for AI Processing.</p>
      <a href="/fax/receive" class="button">Upload Fax</a>
    </div>
    {% if user_status.lower() != 'external' and user_status.lower() != 'external user' %}
    <div class="card-grid">
      <h2>Search & Manage</h2>
      <p>Search through processed faxes and manage extracted fields, only available to Humana Employees.</p>
      <a href="{{ url_for('search_forms') }}" class="button">Search Faxes</a>
    </div>
    <!-- <div class="card-grid">
      <h2>Member Database</h2>
      <p>Verify member information and medication history.</p>
      <a href="#" class="button">View Members</a>
    </div> -->
    {% endif %}
{% endblock %}