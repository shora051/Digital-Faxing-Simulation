{% extends 'base.html' %}
{% block title %}Search Results{% endblock %}

{% block content %}
  <h1>Search Faxes</h1>

  <!-- 🔍 Search Form -->
  <form method="get" action="{{ url_for('search_forms') }}" style="text-align:center; margin-bottom: 30px;">
    <input type="text" name="q" placeholder="Search by name, ID, prescription..." value="{{ query }}" style="width: 60%; padding: 8px; border-radius: 5px; border: 1px solid #ccc;" />
    <button type="submit" style="padding: 8px 16px; background-color: #4A7729; color: white; border: none; border-radius: 5px; cursor: pointer;">Search</button>
  </form>

  <div class="result-list">
    {% if results %}
      {% for result in results %}
        <div class="result-item">
          <a href="/view/{{ result.id }}">Fax #{{ result.id }} — {{ result.created_at }}</a><br>
          <strong>Patient Name:</strong> {{ result.patient_name or "N/A" }}<br>
          <strong>Member ID:</strong> {{ result.member_id or "N/A" }}<br>
          {% if result.prescriptions %}
            <strong>Prescriptions:</strong>
            <ul>
              {% for rx in result.prescriptions %}
                <li>{{ rx }}</li>
              {% endfor %}
            </ul>
          {% endif %}
        </div>
        <hr>
      {% endfor %}
    {% else %}
      <p>No results found for "{{ query }}".</p>
    {% endif %}
  </div>
{% endblock %}

{% block head %}
<style>
  h1 { font-size: 2em; margin-bottom: 10px; text-align: center; color: #003057; }
  p { color: #53575A; margin-bottom: 20px; text-align: center; }

  .result-list {
    max-width: 800px;
    margin: 0 auto;
    text-align: left;
    background: #FFFFFF;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    border: 1px solid #53575A;
  }

  .result-item {
    margin-bottom: 15px;
  }

  .result-item a {
    color: #4A7729;
    text-decoration: none;
    font-weight: bold;
    transition: color 0.2s;
  }

  .result-item a:hover {
    text-decoration: underline;
    color: #003057;
  }
</style>
{% endblock %}
